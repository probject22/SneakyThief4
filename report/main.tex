%\documentclass[a4paper]{article}
\documentclass{ba-kecs}
\usepackage[toc,page]{appendix}
\usepackage[ruled,linesnumbered,vlined]{algorithm2e}
\usepackage{graphicx}

\title{Sneaky Thief}
\author{Stan Kerstjens, ing. R.J.H.M Stevens, Sina Maghami, Rob Clinch, Sharon Hallmanns}
\date{\today}

\begin{document}
\maketitle
\section{Summary}
% Short summary

\section{Introduction}
% Problem Description
The posed problem is as follows. There is a world with two kinds of people, guards and intruders. The guards have no greater goal than to catch the intruders and the intruders have no larger purpose than to get to the valuables that they wish to acquire. The guards and intruders live on discrete tiles on a two dimensional game board among walls, doors, windows, and each other. This paper shall discuss the various tasks both the guards and the intruders need to perform and the appropriate algorithms to reach their respective goals.

% Paper overview
	In the large, the problem  can be divided into three tasks. The first task is that guards that are put into an unknown environment should be able to create a 'mental map' of the environment. This is what we will call the exploration task. The second problem is that the guards should monitor the entire area as closely as possible to make it as difficult as possible for a intruder to pass through the area unseen. This will be called the coverage task. The third problem is that, once an intruder has been detected, the guards should be able to actually catch the intruder. This will be called the pursuit task.

	In every of these three main problems the guard should figure out two things, namely where it should go and how it gets there. The 'where'-question is largely dependent on the specific task at hand, e.g. even if an intruder would only be one unit of distance away, but the task is exploration, then the guard does not necessarily have to move towards the intruder.

	The 'how'-question, on the other hand, is in many cases independent of the exact task that we want to achieve and therefore finding the shortest route to the destination does usually suffice and is often even the best route. We will call the 'how'-question the path finding problem.

	The final task of the guards is to combine the three main problems and decide when the guard should solve what problem. The intuitive solution would be to explore until the entire environment is known and then start covering the area. During this process pursuit is started as soon as an intruder is detected. This intuitive answer, however, runs into issues once it is not known to the guard how big the area actually is, so it will never know if the map if fully explored or not. Another possible issue arises when an intruder, for example, disappears behind a wall. The pursuing guard does not detect the intruder anymore and stops pursuit. He should, however, have the intelligence to predict where the guard has gone.
	
	
	
	The rest of this paper is organised as follows. Section~\ref{sec:simulator} provides the knowledge of the simulated world and its rules. Sections~\ref{sec:pathfinding},~\ref{sec:coverage},~\ref{sec:pursuit}~and~\ref{sec:avoidance} will cover the implemented algorithms of path finding, coverage, pursuit and avoidance respectively.The experiments and results can be found in section~\ref{sec:experiments}. Section~\ref{sec:discussion} will pose discussion points that were found during this research. Finally, the conclusion will be given in section~\ref{sec:conclusion}
	
		\section{Simulator environment}
		\label{sec:simulator}
		\subsection{Time perception}
			The time in the simulator is perceived continuously to allow for continuous velocity, even in a discretised world. Although the moves of the agents on the map are fully discretised, the simulator takes into account how long this unit's move has taken to perform and only allows the same agent to move again once all other agents have caught up with his 'time'. In other words, each agent has his own progress in time and is only allowed to move when his time is lower (or equal) than all the other agents' times.
		\subsection{Game Rules}
        \subsection{Map Generator}
        \input{mapgenerator.tex}


	
\section{Path finding}
\label{sec:pathfinding}
		As already mentioned in the introduction, the answer to the question on what path to take to a certain location is in many cases not important as long as the the shortest path is found. This is why the general methods of path finding will be discussed, without referring to what goal the agents' movement serves. There are also cases where the shortest path is not the best path. This is heavily dependent on the task and will therefore be discussed in the sections dealing with those specific tasks.

    \subsection{A-star}
    \label{sec:astar}
		\input{astar.tex}
    
    \subsection{Rob-star}
    \label{sec:Robstar}
		\input{robStar.tex}
		
	
	\subsection{RTTE-h}
		\input{rtteh.tex}

%	\section{Exploration}

	\section{Coverage}
	\label{sec:coverage}
	Any intruder will try to be undetected. In order to increase the chance of detecting an intruder it is important to make sure that the environment is monitored as closely as possible. This is the problem of coverage. Given the environment, the agents should move in such a way that no intruder can move through the environment undetected. The intuitive answer behind this problem is to try to disperse the guards over the environment as well as possible, which is exactly what the StiCo algorithm aims to do.
	
		\subsection{StiCo}
			\input{stico.tex}

	\section{Pursuit}
	\label{sec:pursuit}
		When considering the problem of pursuit, there is again a very simple intuitive answer, namely to go directly to the location of the intruder following the shortest path. This will often be the best solution if you are a lone guard pursuing an intruder. Yet even then, this strategy will only work if either the intruder is not actively avoiding the guard, or the guard is faster than the intruder. As none of these conditions can be assumed true, the program needs to act slightly more intelligently.

	    \subsection{MTES}
			\input{mtes.tex}

		\subsection{Blocking Escape Directions}
			\input{bes.tex}

\section{Avoidance}
    \label{sec:avoidance}
    \subsection{Prey A*}
    \subsection{Sneakescape}
	\label{sec:sneakescape}
	Sometimes the best path is not simply defined by the shortest path towards a specific coordinate, but rather to avoid a certain coordinate. The intruder, for instance, wants to avoid the guards. To do this he can subtract the heuristic function toward all guards from the evaluation function $f$ (see eq.~\ref{eq:astarevaluation}). In order to vary the importance of getting to the goal rather than escaping from the guards a weight value is assigned to the heuristic value of getting to the goal.
	%Workings of Sneakescape
			Sneakescape uses an evaluation function $s(x)$ which depends on the A-star's evaluation function $f(x)$ and the summation heuristic functions toward the predators $h(G_i)$.
			\begin{equation}
				\label{eq:sneakyscape}
			 	s(x,G) = c(x) + \alpha h(x) - \sum_{i=0}^n h(G_i)
			\end{equation} 
			Where $x$ is the coordinate of the target, $G$is the list of predators coordinates and $\alpha$ is the given weight to the tendency of moving towards the target. At every iteration the neighbour with the lowest $s(x,G)$ is chosen(see alg.~\ref{alg:sneakyscape}).
	\begin{algorithm}
	 \label{alg:sneakyscape}
				\KwData{Prey coordinate $t$; Set of predator coordinates $G$; Goal Coordinate $x$; evaluation function $s(x,G)$}
				\For{$n \in $ movable neighbours of $t$}{
				    Calculate $s(x,G)$\;
				}
				Return $\min_{s(x,G)}$ \;
				\caption{Sneakescape algorithm}
			\end{algorithm}

\section{Exploration}

\section{Experiments and results}
\label{sec:experiments}
\input{experiments.tex}
	% This chapter should contain all experimental results that we obtain (lots of graphs!)
	
\section{Discussion}
\label{sec:discussion}

\section{Conclusions}
\label{sec:conclusion}
	% This chapter should contain all our conclusions of how the experimental results compare to our initial expectations.
	% Also it should contain our evaluation of the different approaches we took towards the problems

\newpage
\bibliography{references}

\newpage
\begin{appendices}
\section{Other Data}
	
\end{appendices}



\end{document}
